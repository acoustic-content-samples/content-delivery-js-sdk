var ContentDeliverySDK=function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(r,i,function(t){return e[t]}.bind(null,i));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=2)}([function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(5)),u=i(r(6)),n={q:[],fq:[],fl:["*","document:[json]"],sort:[]};class Documents{constructor(e,t=n){this.isDocument=!0,this.draft=!1,this.retired=!1,this.httpClient=e,this.queryBuilder=new u.default(t)}filterBy(e){return Object.keys(e).forEach(t=>{this.queryBuilder.addFq(t,e[t])}),this}sortBy(e,t){const r=this.queryBuilder.getQueryObject(),i=r.sort.findIndex(t=>t.field===e);return i>=0&&r.sort.splice(i,1),this.queryBuilder.addSort(e,t),this}rows(e){return Number.isInteger(e)&&e>0&&this.queryBuilder.addRows(e),this}start(e){return Number.isInteger(e)&&e>0&&this.queryBuilder.addStart(e),this}searchText(e){return"string"==typeof e&&e.length>0&&(this.queryBuilder.cleanQ(),this.queryBuilder.addQ(e)),this}filterQuery(e){return Array.isArray(e)&&e.length&&e.forEach(e=>{this.queryBuilder.addRawFq(e)}),this}page(e){return Number.isInteger(e)&&e>0&&(this.pageNumber=e),this}nextPage(){const e=this.queryBuilder.getQueryObject(),t=e.rows||10;return this.queryBuilder.addStart((e.start||0)+t),this}previousPage(){const e=this.queryBuilder.getQueryObject(),t=e.rows||10,r=e.start-t;return this.queryBuilder.addStart(r>=0?r:0),this}filterByName(e){return"string"==typeof e&&e.length>0&&this.filterBy({name:`"${e}"`}),this}filterByTags(e){return Array.isArray(e)&&e.length&&this.filterBy({tags:`(${e.map(e=>`"${e}"`).join(" OR ")})`}),this}filterById(e){return"string"==typeof e&&e.length>0&&this.filterBy({id:e}),this}filterByCategory(e){return"string"==typeof e&&e.length>0&&this.filterBy({categories:`("${e}")`}),this}includeDocument(e){return this.isDocument=e,this}get(){const e=this.makeQueryString();return this.httpClient.get(e).then(e=>new s.default(e,new Documents(this.httpClient,this.queryBuilder.getQueryObject())))}escapeCharacters(e){const t=[];if("string"==typeof e&&e.length>0)for(let r=0;r<e.length;r++){const i=e.charAt(r);"!"!==i&&"*"!==i&&"+"!==i&&"-"!==i&&"&"!==i&&"|"!==i&&"("!==i&&")"!==i&&"["!==i&&"]"!==i&&"{"!==i&&"}"!==i&&"^"!==i&&'"'!==i&&"~"!==i&&"?"!==i&&":"!==i&&"/"!==i||t.push("\\"),t.push(i)}return t.join("")}makeQueryString(){const e=this.queryBuilder.getQueryObject();if(this.setStatus(),0===e.q.length&&this.queryBuilder.addQ("*:*"),0===e.sort.length&&this.queryBuilder.addSort("lastModified",!0),Number.isInteger(this.pageNumber)&&this.pageNumber>0){const t=e.rows||10,r=t*this.pageNumber-t;this.queryBuilder.addStart(r)}return this.isDocument||e.fl.splice(1,1),this.resetOptions(),this.queryBuilder.makeQueryString()}logout(){return this.httpClient.logout()}resetOptions(){this.draft=!1,this.retired=!1,this.isDocument=!0}setStatus(){this.retired&&this.draft?this.queryBuilder.addMultiFq([{field:"status",value:"ready"},{field:"status",value:"draft"},{field:"draftStatus",value:"*"},{field:"status",value:"retired"}],"OR"):(this.draft&&this.queryBuilder.addMultiFq([{field:"draftStatus",value:"*"},{field:"status",value:"ready"},{field:"status",value:"draft"}],"OR"),this.retired&&this.queryBuilder.addFq("status","(ready OR retired)"))}}t.default=Documents},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(0));class DraftRetiredDocuments extends s.default{includeDraft(e){return this.draft=e,this.httpClient.isPreview=this.draft||this.retired,this}includeRetired(e){return this.retired=e,this.httpClient.isPreview=this.draft||this.retired,this}}t.default=DraftRetiredDocuments},function(e,t,r){"use strict";const i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(r(3));class ContentDeliverySDK{constructor(e){this.config=Object.assign({},e),this._deliverySearch=new i.default(this.config)}static create(e){return new ContentDeliverySDK(e)}deliverySearch(){return this._deliverySearch}}e.exports=ContentDeliverySDK},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(4)),u=i(r(7)),n=i(r(8)),o=i(r(9)),a=i(r(10));t.default=class DeliverySearch{constructor(e){this.config=e}assets(){return new s.default(new a.default(this.config))}categories(){return new u.default(new a.default(this.config))}contentItems(){return new n.default(new a.default(this.config))}contentTypes(){return new o.default(new a.default(this.config))}}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(1));class Assets extends s.default{constructor(e){super(e),this.filterQuery(["classification:asset"])}}t.default=Assets},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class DeliverySearchResult{constructor(e,t){this.query=t,this._numFound=e.data.numFound||0,this._documents=e.data.documents||[]}numFound(){return this._numFound}documents(){return this._documents}nextPage(){return this.query.nextPage().get()}previousPage(){return this.query.previousPage().get()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class QueryBuilder{constructor(e={}){this.query={},this.query=JSON.parse(JSON.stringify(e))}getQueryObject(){return this.query}addFq(e,t){this.query.fq||(this.query.fq=[]),this.query.fq.push(e+":"+encodeURIComponent(t))}addRawFq(e){this.query.fq||(this.query.fq=[]),this.query.fq.push(e)}addMultiFq(e,t="AND"){this.query.fq||(this.query.fq=[]);const r=e.reduce((e,t)=>(e.push(t.field+":"+encodeURIComponent(t.value)),e),[]).join(`%20${t}%20`);this.query.fq.push(r)}addSort(e,t){this.query.sort||(this.query.sort=[]),this.query.sort.push({field:e,ascending:t})}addRows(e){this.query.rows=e}addStart(e){this.query.start=e}addQ(e){this.query.q||(this.query.q=[]),this.query.q.push(e)}cleanQ(){this.query.q=[]}makeQueryString(){const e={};this.query.q&&this.query.q.length&&(e.q=this.query.q.join("%20AND%20")),this.query.sort&&this.query.sort.length&&(e.sort=encodeURIComponent(this.query.sort.reduce((e,t)=>(e.push(t.field+" "+(t.ascending?"asc":"desc")),e),[]).join(","))),this.query.rows&&(e.rows=this.query.rows),this.query.start&&(e.start=this.query.start),this.query.fq&&this.query.fq.length&&(e.fq=this.query.fq.join("&fq=")),this.query.fl&&this.query.fl.length&&(e.fl=this.query.fl.join("&fl="));const t=[];for(const r of Object.keys(e))t.push(r+"="+e[r]);return t.join("&")}}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(0));class Categories extends s.default{constructor(e){super(e),this.filterQuery(["classification:category"])}}t.default=Categories},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(1));class ContentItems extends s.default{constructor(e){super(e),this.filterQuery(["classification:content"])}protectedContent(e){return this.httpClient.isProtectedContent=e,this}completeContentContext(e){return this.httpClient.isCompleteContentContext=e,this}}t.default=ContentItems},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(0));class ContentTypes extends s.default{constructor(e){super(e),this.filterQuery(["classification:content-type"])}}t.default=ContentTypes},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(11)),u=r(13),n=r(14);class DeliverySearchHttpClient extends s.default{constructor(e){super(),this.isProtectedContent=!1,this.isCompleteContentContext=!1,this.isPreview=!1,this.isLoggedIn=null,this.config=e}makePreview(e){return e.replace(/\/\/my(.*?)\./,"//my$1-preview.")}getHttpConfig(){return u.isBrowser()?this.isCompleteContentContext&&!this.isProtectedContent?{}:{withCredentials:!0}:!1===this.isLoggedIn||!this.config.username&&!this.config.password?{}:{auth:{username:this.config.username,password:this.config.password}}}get(e){return this.config.username&&this.config.password&&null===this.isLoggedIn?this.login(this.config.username,this.config.password).then(()=>(this.isLoggedIn=!0,super.get(this.getSearchUrl()+"?"+e,null,this.getHttpConfig())),e=>{throw this.isLoggedIn=!1,e}):super.get(this.getSearchUrl()+"?"+e,null,this.getHttpConfig())}login(e,t){const r={auth:{username:e,password:t},withCredentials:!0};let i=this.config.apiUrl;return this.isPreview&&(i=this.makePreview(this.config.apiUrl)),super.get(i+n.basicauthUrl,null,r)}logout(){return this.config=Object.assign(Object.assign({},this.config),{username:"",password:""}),this.isLoggedIn=null,super.get(this.config.apiUrl+n.logout)}getSearchUrl(){const e=this.isProtectedContent?n.protectedContentUrl:n.publicContentUrl,t=this.isCompleteContentContext?n.deliveryRenderingContextsUrl:n.deliverySearchUrl;let r=`${this.config.apiUrl}/${e}/${n.version}/${t}`;return this.isPreview&&(r=this.makePreview(r)),r}}t.default=DeliverySearchHttpClient},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(12));t.default=class HttpClient{get(e,t,r){return s.default.get(e,Object.assign(Object.assign({},r),{params:t}))}post(e,t){return s.default.post(e,t)}}},function(e,t){e.exports=axios},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=()=>"undefined"!=typeof window&&void 0!==window.document},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publicContentUrl="delivery",t.protectedContentUrl="mydelivery",t.deliverySearchUrl="search",t.basicauthUrl="/login/v1/basicauth",t.deliveryRenderingContextsUrl="rendering/search",t.logout="/login/v1/removecookies",t.version="v1"}]);